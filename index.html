
<!DOCTYPE html>
<html lang="cn" xmlns:padding-top="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>ILS编辑器</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/css/bootstrap.min.css">
    <style>
        body{
            background: black;
        }
        .dark_ui,textarea,input{
            background-color: #2b2b2b;
            background-color: #373737!important;
            color: aliceblue!important;
        }



    </style>

</head>
<body >
<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <!-- Brand/logo -->
    <a class="navbar-brand" href="#">ICREATORMC·ILS编辑工具</a>


</nav>
<div class="container-fluid" style="padding-top: 20px">
    <div class="row">


        <div class="col-sm-12 col-md-6">
            <div class="card dark_ui text-white">
                <div class="card-header">基本设置</div>
                <div class="card-body">
                    <div class="form-group">
                        <label>物品ID(英文)</label>
                        <input type="text" class="form-control" id="type">
                    </div>
                    <div class="form-group">
                        <label>损毁值(注意，在某些时候是子ID，比如木板)</label>
                        <input type="text" class="form-control" id="damage">
                    </div>
                    <div class="form-group">
                        <label>显示名称</label>
                        <input type="text" class="form-control" id="display">
                    </div>
<!--
                    <div class="form-group">
                        <label>IORES</label>
                        <textarea class="form-control" rows="20" id="lores"></textarea>
                        <button id="tips" class="btn btn-primary" data-toggle="modal" data-target="#tip">查看属性列表</button>
                    </div>
                    -->

                  <!--  <button id="build" class="btn btn-primary">生成</button> -->
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-6" >
            <div class="card dark_ui text-white">
                <div class="card-header">编写LORES</div>
                <div class="card-body">


                    <div class="form-group">
                        <label>IORES</label>
                        <textarea class="form-control" rows="5" id="lores"></textarea>
                        <button id="tips" class="btn btn-primary" data-toggle="modal" data-target="#tip">查看属性列表</button>
                    </div>

                    <button id="build" class="btn btn-primary">生成</button>
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-md-12" style="padding-top: 10px">
            <div class="card dark_ui">
                <div class="card-header">物品代码</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col">
                            <div class="form-group">

                                <textarea class="form-control" rows="20" id="yaml_code"></textarea>

                            </div>
                            <button id="load" class="btn btn-primary">加载</button>


                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="tip">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- 模态框头部 -->
            <div class="modal-header dark_ui">
                <h5 class="modal-title">属性列表</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- 模态框主体 -->
            <div class="modal-body dark_ui">
                <table class="table table-dark">
                    <thead>
                    <tr>
                        <th>属性</th>
                        <th>颜色</th>
                    </tr>
                    </thead>
                    <tbody>

                    <tr><td>攻击力</td>    <td><input type="text" class="form-control" id="v_4"></td></tr>
                    <tr><td>暴击几率</td>    <td><input type="text" class="form-control" id="v_5"></td></tr>
                    <tr><td>暴击伤害</td>    <td><input type="text" class="form-control" id="v_6"></td></tr>
                    <tr><td>生命值</td>    <td><input type="text" class="form-control" id="v_7"></td></tr>
                    <tr><td>生命回复</td>    <td><input type="text" class="form-control" id="v_8"></td></tr>
                    <tr><td>生命偷取</td>    <td><input type="text" class="form-control" id="v_9"></td></tr>
                    <tr><td>荆棘</td>    <td><input type="text" class="form-control" id="v_10"></td></tr>
                    <tr><td>火焰攻击</td>    <td><input type="text" class="form-control" id="v_11"></td></tr>
                    <tr><td>寒冰攻击</td>    <td><input type="text" class="form-control" id="v_12"></td></tr>
                    <tr><td>剧毒攻击</td>    <td><input type="text" class="form-control" id="v_13"></td></tr>
                    <tr><td>凋零攻击</td>    <td><input type="text" class="form-control" id="v_14"></td></tr>
                    <tr><td>极限打击</td>    <td><input type="text" class="form-control" id="v_15"></td></tr>
                    <tr><td>致盲打击</td>    <td><input type="text" class="form-control" id="v_16"></td></tr>
                    <tr><td>经验加成</td>    <td><input type="text" class="form-control" id="v_17"></td></tr>
                    <tr><td>耐久</td>    <td><input type="text" class="form-control" id="v_18"></td></tr>
                    </tbody>
                </table>

        </div>
    </div>
</div>
</div>

<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/popper.js/1.12.5/umd/popper.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/esprima/2.7.3/esprima.min.js"></script>
<script src="https://cdn.bootcss.com/js-yaml/3.12.0/js-yaml.min.js"></script>
<script src="https://cdn.bootcss.com/autocomplete.js/0.33.0/autocomplete.jquery.min.js"></script>
<script>
    $('#load').click(function () {

        var data = jsyaml.load($('#yaml_code').val());
        console.log(data);
        $('#type').val(data['Item']['type']).toUpperCase();
        $('#damage').val(data['Item']['damage']);
        $('#display').val(data['Item']['meta']['display-name']);
        var lores=data['Item']['meta']['lore'];
        $('#lores').val('');
        for(var x=0;x<lores.length;x++){
            if (x == lores.length - 1) {

                $('#lores').val($('#lores').val() + lores[x]);
            } else {
                $('#lores').val($('#lores').val() + lores[x] + "\n");
            }

        }
    });
    $('#build').click(function () {
        var out_put=new Object();
        out_put['Item']=new Object();
        out_put['Item']['==']="org.bukkit.inventory.ItemStack";
        out_put['Item']['type']=$('#type').val();
        if($('#damage').val()!="") out_put['Item']['damage']=parseInt($('#damage').val());
        out_put['Item']['meta']=new Object();
        out_put['Item']['meta']['==']="ItemMeta";
        out_put['Item']['meta']['meta-type']="UNSPECIFIC";
        out_put['Item']['meta']['display-name']=$('#display').val();
        var loreArr=new Array();
        if($('#lores').val()!=""){
            loreArr=$('#lores').val().replace(/&/g,"§").split("\n");
        }
        loreArr=getProlore().concat(loreArr);
        loreArr.unshift('&e&m&l────&a&m&l───&2&m&l───&3&m&l───&b&m&l───&9&m&l───&1&m&l────'.replace(/&/g,"§"));
        out_put['Item']['meta']['lore']= loreArr.concat('&e&m&l───&a&m&l───&2&m&l───&8&l[&6&l属性&8&l]&3&m&l───&b&m&l───&9&m&l───'.replace(/&/g,"§"));

        $('#yaml_code').val(jsyaml.dump(out_put));
    });


    function getProlore() {
        var tmp=new Array();
        if($('#v_4').val()!="") tmp.push( "§3攻击力 §6"+$('#v_4').val()+'§r');
        if($('#v_5').val()!="") tmp.push("§3暴击几率 §6"+$('#v_5').val()+'§r');
        if($('#v_6').val()!="") tmp.push( "§3暴击伤害 §6"+$('#v_6').val()+'§r');
        if($('#v_7').val()!="") tmp.push( "§3生命值 §6"+$('#v_7').val()+'§r');
        if($('#v_8').val()!="") tmp.push( "§3生命回复 §6"+$('#v_8').val()+'§r');
        if($('#v_9').val()!="") tmp.push( "§a生命偷取 §6"+$('#v_9').val()+'§r');
        if($('#v_10').val()!="") tmp.push( "§e荆棘 §6"+$('#v_10').val()+'§r');
        if($('#v_11').val()!="") tmp.push("§c火焰攻击 §6"+$('#v_11').val()+'§r');
        if($('#v_12').val()!="") tmp.push( "§9寒冰攻击 §6"+$('#v_12').val()+'§r');
        if($('#v_13').val()!="") tmp.push( "§2剧毒攻击 §6"+$('#v_13').val()+'§r');
        if($('#v_14').val()!="") tmp.push( "§f凋零打击 §6"+$('#v_14').val()+'§r');
        if($('#v_15').val()!="") tmp.push( "§5极限打击 §6"+$('#v_15').val()+'§r');
        if($('#v_16').val()!="") tmp.push( "§7致盲攻击 §6"+$('#v_16').val()+'§r');
        if($('#v_17').val()!="") tmp.push( "§d经验加成 §6"+$('#v_17').val()+'§r');
        if($('#v_18').val()!="") tmp.push( "§6耐久度: §6"+$('#v_18').val()+'§r');
        return tmp;
    }
</script>
</body>
</html>